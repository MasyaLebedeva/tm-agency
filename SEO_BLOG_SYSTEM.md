# Система автоматической генерации SEO-статей для блога

## Описание

Система автоматически генерирует и публикует 3 SEO-оптимизированные статьи в день на основе популярных запросов по продвижению в Telegram.

## Как это работает

1. **Ежедневно в 7:00** (по расписанию в `vercel.json`) запускается cron-задача `/api/rss-publish`
2. Система выбирает 3 запроса из списка популярных SEO-запросов (`src/app/api/seo-queries.ts`)
3. Для каждого запроса генерируется статья через OpenAI API с учетом:
   - SEO-оптимизированного заголовка (50-60 символов)
   - Полезного контента для пользователей
   - Естественной интеграции информации о T&M Agency
   - Призыва к действию (бесплатная консультация)
4. Статьи автоматически публикуются в `src/app/blog/blog-data.ts` через GitHub API

## Структура статьи

Каждая статья включает:

1. **Заголовок (H1)** - SEO-оптимизированный, 50-60 символов
2. **Вводная часть** - захватывающее введение, отвечающее на вопрос пользователя
3. **Основной контент** - детальное раскрытие темы с практическими советами и примерами
4. **Блок продажи T&M Agency** - естественная интеграция информации об агентстве
5. **Призыв к действию** - предложение бесплатной консультации

## Добавление новых SEO-запросов

Чтобы добавить новые популярные запросы, отредактируйте файл `src/app/api/seo-queries.ts`:

```typescript
export const seoQueries = [
  'ваш новый запрос',
  'еще один запрос',
  // ... остальные запросы
]
```

Система автоматически будет использовать новые запросы при следующей публикации.

## Настройка

### Переменные окружения

Убедитесь, что установлены следующие переменные:

- `OPENAI_API_KEY` - ключ API OpenAI (обязательно)
- `GITHUB_TOKEN` - токен GitHub для публикации статей
- `GITHUB_REPO` - репозиторий (например, `MasyaLebedeva/tm-agency`)
- `GITHUB_BRANCH` - ветка (по умолчанию `main`)
- `GITHUB_AUTHOR_NAME` - имя автора (по умолчанию `T&M Bot`)
- `GITHUB_AUTHOR_EMAIL` - email автора (по умолчанию `bot@tmads.ru`)

### Расписание публикации

Расписание настраивается в `vercel.json`:

```json
{
  "crons": [
    { "path": "/api/rss-publish", "schedule": "0 7 * * *" }
  ]
}
```

Формат: `минута час день месяц день_недели`
- `0 7 * * *` - каждый день в 7:00

## Ручной запуск

Для тестирования можно запустить публикацию вручную, открыв в браузере:
```
https://ваш-домен.com/api/rss-publish
```

## Особенности

- **SEO-оптимизация**: Заголовки оптимизированы по длине (50-60 символов)
- **Естественный текст**: Используется temperature 0.8 для более живого текста
- **Автоматическая ротация**: Запросы выбираются последовательно, чтобы избежать повторений
- **Обработка ошибок**: При ошибке генерации создается базовая статья с сообщением

## Мониторинг

После публикации система возвращает JSON с информацией:
```json
{
  "ok": true,
  "added": 3,
  "queries": ["запрос 1", "запрос 2", "запрос 3"],
  "ai": true
}
```

